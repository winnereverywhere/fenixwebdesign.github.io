function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}window.bricksUtils&&(window.bricksUtils.updateLiveSearchTerm=function(e,t){document.querySelectorAll('span[data-brx-ls-term="'.concat(e,'"]')).forEach((function(e){e.innerHTML=t}))},window.bricksUtils.hideLiveSearchWrapper=function(e){document.querySelectorAll('[data-brx-ls-wrapper="'.concat(e,'"]')).forEach((function(e){e.classList.remove("brx-ls-active")}))},window.bricksUtils.showLiveSearchWrapper=function(e){document.querySelectorAll('[data-brx-ls-wrapper="'.concat(e,'"]')).forEach((function(e){e.classList.add("brx-ls-active")}))},window.bricksUtils.updateSelectedFilters=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.filterId||!1,n=window.bricksData.queryLoopInstances[e]||!1;if(i&&e&&n){var a=(null==n?void 0:n.isLiveSearch)||!1;window.bricksData.selectedFilters[e]||(window.bricksData.selectedFilters[e]={});var l=r||window.location.origin+window.location.pathname,c=function(e){return""===e.currentValue||0===e.currentValue&&"pagination"===e.filterType||Array.isArray(e.currentValue)&&0===e.currentValue.length||"range"===e.filterType&&JSON.stringify(e.currentValue)===JSON.stringify([e.min,e.max])},s=function(e){if(window.bricksData.selectedFilters[e]){var t={},r=0;Object.keys(window.bricksData.selectedFilters[e]).forEach((function(i){var n=window.bricksData.selectedFilters[e][i];t[r]=n,r++})),window.bricksData.selectedFilters[e]=t}};if(c(t))Object.keys(window.bricksData.selectedFilters[e]).forEach((function(t){if(window.bricksData.selectedFilters[e][t]===i){delete window.bricksData.selectedFilters[e][t];var r=window.bricksData.filterInstances[i]||!1;r&&"pagination"===r.filterType&&(l=l.replace(/\/page\/[0-9]+/g,""))}})),s(e);else if(!Object.values(window.bricksData.selectedFilters[e]).includes(i)){var o=Object.keys(window.bricksData.selectedFilters[e]).length;window.bricksData.selectedFilters[e][o]=i}if("pagination"!==t.filterType&&window.bricksData.selectedFilters[e]){var u=!1;Object.keys(window.bricksData.selectedFilters[e]).forEach((function(t){var r=window.bricksData.selectedFilters[e][t],i=window.bricksData.filterInstances[r]||!1;i&&"pagination"===i.filterType&&(delete window.bricksData.selectedFilters[e][t],bricksUtils.resetFilterValue(i),u=!0)})),s(e),u&&!a&&(l=l.replace(/\/page\/[0-9]+/g,""))}if("apply"===t.filterType)window.bricksData.selectedFilters[e]={},bricksUtils.getFiltersForQuery(e).forEach((function(t){if(!c(t)&&!Object.values(window.bricksData.selectedFilters[e]).includes(t.filterId)){var r=Object.keys(window.bricksData.selectedFilters[e]).length;window.bricksData.selectedFilters[e][r]=t.filterId}}));if("reset"===t.filterType&&(window.bricksData.selectedFilters[e]={}),null==n||!n.disableUrlParams){if(a)l=window.location.href;else{var d=bricksUtils.buildFilterUrlParams(e);l=d?"".concat(l,"?").concat(d):l}bricksUtils.updatePushState(e,l)}}},window.bricksUtils.resetFilterValue=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.filterType,i=e.filterElement,n=e.originalValue,a=e.targetQueryId;switch(r){case"search":i.value=n,e.currentValue=n;var l=i.nextElementSibling||!1;l&&(""===n?l.classList.remove("brx-show"):l.classList.add("brx-show")),bricksUtils.updateLiveSearchTerm(a,n);break;case"select":i.value=n,e.currentValue=n;break;case"pagination":e.currentValue=n;break;case"radio":i.value=n,e.currentValue=n,i.querySelectorAll("input").forEach((function(e){e.value!==n?e.checked=!1:e.checked=!0}));break;case"checkbox":var c=function(e,t){e.forEach((function(e){e.checked=t.has(e.value)}))};if(!1!==t)e.currentValue=e.currentValue.filter((function(e){return e!==t})),c(i.querySelectorAll("input"),new Set([t]));else e.currentValue=_toConsumableArray(n),c(i.querySelectorAll("input"),new Set(n));break;case"datepicker":var s=e.datepicker||!1;if(!s)return;s.clear(),s.setDate(n,!1),e.currentValue=n;break;case"range":e.currentValue=_toConsumableArray(n)}},window.bricksUtils.buildFilterUrlParams=function(e){var t,r=new URLSearchParams,i=new URLSearchParams(window.location.search),n={};return i.forEach((function(e,t){var r=t.replace(/\[.*?\]/g,"[]");(r=r.replace("[]","")).includes("brx_")||window.bricksData.filterNiceNames.includes(r)||(n[t]=e)})),Object.keys(n).forEach((function(e){r.append(e,n[e])})),Object.keys(window.bricksData.selectedFilters[e]).length>0&&Object.keys(window.bricksData.selectedFilters[e]).forEach((function(t){var i=window.bricksData.selectedFilters[e][t],n=window.bricksData.filterInstances[i]||!1;if(n){var a=n.currentValue,l=n.filterNiceName||"brx_".concat(i);""===a||Array.isArray(a)&&0===a.length||"pagination"!==n.filterType&&(Array.isArray(a)?(l="".concat(l,"[]"),a.forEach((function(e){r.append(l,e)}))):r.append(l,a))}})),null!==(t=r.toString())&&void 0!==t?t:""},window.bricksUtils.updatePushState=function(e,t){if(e&&t){var r={};bricksUtils.currentPageTargetQueryIds().forEach((function(e){r[e]={},bricksUtils.getFiltersForQuery(e).forEach((function(t){r[e][t.filterId]=t.currentValue}))}));var i=window.bricksData.selectedFilters;window.history.pushState({isBricksFilter:!0,targetQueryId:e,selectedFilters:i,instancesValue:r},"",t)}},window.bricksUtils.getFiltersForQuery=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!window.bricksData.filterInstances||Object.keys(window.bricksData.filterInstances).length<1)return[];var r=Object.values(window.bricksData.filterInstances).filter((function(t){return t.targetQueryId===e}))||[];return t?r.map((function(e){return e[t]})):r},window.bricksUtils.currentPageTargetQueryIds=function(){return!window.bricksData.filterInstances||Object.keys(window.bricksData.filterInstances).length<1?[]:Object.values(window.bricksData.filterInstances).reduce((function(e,t){return e.includes(t.targetQueryId)||e.push(t.targetQueryId),e}),[])},window.bricksUtils.getSelectedFiltersForQuery=function(e){return!window.bricksData.selectedFilters||!window.bricksData.selectedFilters[e]||!window.bricksData.filterInstances||Object.keys(window.bricksData.filterInstances).length<1?[]:Object.values(window.bricksData.selectedFilters[e]).reduce((function(e,t){var r=window.bricksData.filterInstances[t]||!1;return r&&(e[r.filterId]=r.currentValue),e}),{})},window.bricksUtils.fetchFilterResults=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&window.bricksData.queryLoopInstances[e]&&bricksGetQueryResult(e,t).then((function(t){bricksDisplayQueryResult(e,t)})).catch((function(t){window.bricksData.queryLoopInstances[e].xhrAborted||console.log("bricksGetQueryResult:error",t)}))},window.bricksUtils.getDynamicTagsForParse=function(e){var t=[];return Object.values(window.bricksData.activeFiltersCountInstances).filter((function(t){return(null==t?void 0:t.targetQueryId)===e&&(null==t?void 0:t.dynamicTag.startsWith("active_filters_count"))})).forEach((function(e){t.push(e.dynamicTag)})),t},window.bricksUtils.updateParsedDynamicTags=function(e,t){Object.values(window.bricksData.activeFiltersCountInstances).filter((function(t){return(null==t?void 0:t.targetQueryId)===e&&(null==t?void 0:t.dynamicTag.startsWith("active_filters_count"))})).forEach((function(e){var r=e.dynamicTag,i=e.element;t[r]&&i.isConnected&&(i.innerHTML=t[r])}))});var bricksFiltersFn=new BricksFunction({parentNode:document,selector:"[data-brx-filter]",frontEndOnly:!0,eachElement:function(e){var t,r=JSON.parse(null===(t=e.dataset)||void 0===t?void 0:t.brxFilter)||!1;if(r){var i=(null==r?void 0:r.filterId)||!1,n=(null==r?void 0:r.targetQueryId)||!1,a=(null==r?void 0:r.filterType)||!1,l=(null==r?void 0:r.filterAction)||!1,c=(null==r?void 0:r.filterNiceName)||"";if(i&&n&&a&&l){if(window.bricksData.filterInstances||(window.bricksData.filterInstances={}),!window.bricksData.filterInstances[i]){switch(r.filterElement=e,r.currentValue="",r.originalValue="",a){case"search":case"select":e.value&&(r.currentValue=e.value);break;case"reset":case"apply":case"active-filters":break;case"radio":var s=e.querySelector("input:checked");s&&(r.currentValue=s.value);break;case"checkbox":var o=e.querySelectorAll("input:checked");if(o.length){var u=Array.from(o).map((function(e){return e.value}));r.currentValue=u}else r.currentValue=[];r.originalValue=[];break;case"pagination":var d=bricksUtils.getPageNumberFromUrl(window.location.href);if(r.currentValue=d,d>1)if(window.bricksData.selectedFilters[n]||(window.bricksData.selectedFilters[n]={}),!Object.values(window.bricksData.selectedFilters[n]).includes(i)){var f=Object.keys(window.bricksData.selectedFilters[n]).length;window.bricksData.selectedFilters[n][f]=i}break;case"datepicker":var b=e.dataset.bricksDatepickerOptions||!1;b&&(b=JSON.parse(b)).defaultDate&&(Array.isArray(b.defaultDate)&&(b.defaultDate=b.defaultDate.join(",")),r.currentValue=b.defaultDate);break;case"range":var v=e.querySelector('input.min[type="number"]')||0,k=e.querySelector('input.max[type="number"]')||0,p=[r.min,r.max];v&&(p[0]=parseInt(v.value)),k&&(p[1]=parseInt(k.value)),r.currentValue=[].concat(p),r.originalValue=[r.min,r.max]}window.bricksData.filterInstances[i]=r,""!==c&&window.bricksData.filterNiceNames&&!window.bricksData.filterNiceNames.includes(c)&&window.bricksData.filterNiceNames.push(c)}e.dataset.brxFilter=!0}}}});function bricksFilters(){bricksFiltersFn.run()}var bricksSearchFilterFn=new BricksFunction({parentNode:document,selector:".brxe-filter-search input[data-brx-filter]",frontEndOnly:!0,eachElement:function(e){var t=Object.values(window.bricksData.filterInstances).find((function(t){return t.filterElement===e}))||!1;if(t){null==t||t.filterId;var r=(null==t?void 0:t.targetQueryId)||!1,i=(null==t?void 0:t.filterMethod)||"ajax",n=(null==t?void 0:t.filterApplyOn)||"change",a=(null==t?void 0:t.filterInputDebounce)||500,l=(null==t?void 0:t.filterMinChars)||3;if("ajax"===i){var c=function(i){var a=e.value,c="Enter"===i.key;if(function(t){var r=e.nextElementSibling||!1;r&&(""===t?r.classList.remove("brx-show"):r.classList.add("brx-show"))}(a),c||a!==t.currentValue){t.currentValue=a;var s=window.bricksData.queryLoopInstances[r]||!1;s&&(null!=s&&s.isLiveSearch&&""===a?bricksUtils.hideLiveSearchWrapper(r):!c&&a.length&&a.length<l||(c||r&&"click"!==n)&&(bricksUtils.updateLiveSearchTerm(r,a),bricksUtils.updateSelectedFilters(r,t),bricksUtils.fetchFilterResults(r)))}};"change"===n?(e.addEventListener("keyup",(function(){return bricksUtils.maybeAbortXhr(r)})),e.addEventListener("keyup",bricksUtils.debounce(c,a))):(e.addEventListener("input",c),e.addEventListener("keyup",(function(e){"Enter"===e.key&&c(e)}))),e.addEventListener("focus",(function(e){var t=e.target.value,i=window.bricksData.queryLoopInstances[r]||!1;i&&null!=i&&i.isLiveSearch&&""!==t&&bricksUtils.showLiveSearchWrapper(r)}));var s=e.nextElementSibling||!1;if(!s)return;if(!s.classList.contains("icon"))return;var o=function(t){t.preventDefault(),e.value="",e.focus(),c(new KeyboardEvent("keyup",{key:"Enter"}))};s.addEventListener("click",(function(e){return o(e)})),s.addEventListener("keydown",(function(e){"Enter"!==e.key&&" "!==e.key||o(e)}))}}}});function bricksSearchFilter(){bricksSearchFilterFn.run()}var bricksSelectFilterFn=new BricksFunction({parentNode:document,selector:".brxe-filter-select[data-brx-filter]",frontEndOnly:!0,eachElement:function(e){var t=Object.values(window.bricksData.filterInstances).find((function(t){return t.filterElement===e}))||!1;if(t){null==t||t.filterId;var r=(null==t?void 0:t.targetQueryId)||!1,i=(null==t?void 0:t.filterMethod)||"ajax",n=(null==t||t.filterSource,(null==t?void 0:t.filterApplyOn)||"change");r&&"ajax"===i&&e.addEventListener("change",(function(e){var i=e.target.value;i!==t.currentValue&&(t.currentValue=i,"change"===n&&(window.bricksData.queryLoopInstances[r]||!1)&&(bricksUtils.updateSelectedFilters(r,t),bricksUtils.fetchFilterResults(r)))}))}}});function bricksSelectFilter(){bricksSelectFilterFn.run()}var bricksRadioFilterFn=new BricksFunction({parentNode:document,selector:".brxe-filter-radio[data-brx-filter] input",frontEndOnly:!0,eachElement:function(e){var t=e.closest("[data-brx-filter]")||!1;if(t){var r=Object.values(window.bricksData.filterInstances).find((function(e){return e.filterElement===t}))||!1;if(r){null==r||r.filterId;var i=(null==r?void 0:r.targetQueryId)||!1,n=(null==r?void 0:r.filterMethod)||"ajax",a=(null==r?void 0:r.filterApplyOn)||"change";if(i&&(e.addEventListener("keydown",(function(e){if("ArrowDown"===e.key||"ArrowUp"===e.key||"ArrowLeft"===e.key||"ArrowRight"===e.key){e.preventDefault();var t=e.target.closest("li");if("ArrowDown"===e.key||"ArrowRight"===e.key){for(var r=t.nextElementSibling;r&&r.querySelector("input")&&r.querySelector("input").disabled;)r=r.nextElementSibling;r&&r.querySelector("input")&&r.querySelector("input").focus()}else if("ArrowUp"===e.key||"ArrowLeft"===e.key){for(var i=t.previousElementSibling;i&&i.querySelector("input")&&i.querySelector("input").disabled;)i=i.previousElementSibling;i&&i.querySelector("input")&&i.querySelector("input").focus()}}})),"ajax"===n)){e.addEventListener("click",(function(i){if(r.currentValue===e.value){if(""===e.value)return;var n=t.querySelectorAll("input")||!1;n&&n.forEach((function(e){e.removeAttribute("checked")}));var a=t.querySelector('input[value=""]')||!1;a&&(a.checked=!0,a.setAttribute("checked","checked")),e.checked=!1,e.removeAttribute("checked"),r.currentValue="",e.dispatchEvent(new Event("change"),{bubbles:!0})}else{(t.querySelectorAll("input")||!1).forEach((function(t){t!==e&&t.removeAttribute("checked")})),e.checked=!0,e.setAttribute("checked","checked"),r.currentValue=e.value}!function(){var e=t.querySelectorAll(".brx-option-active")||!1;e&&e.forEach((function(e){e.classList.remove("brx-option-active")}));var r=t.querySelector("input:checked")||!1;if(r){var i=r.closest("li")||!1;i&&i.classList.add("brx-option-active");var n=r.closest("label")||!1;n&&n.classList.add("brx-option-active");var a=r.nextElementSibling||!1;a&&(a.focus(),a.classList.add("brx-option-active"))}}()})),"change"===a&&e.addEventListener("change",(function(e){window.bricksData.queryLoopInstances[i]&&(bricksUtils.updateSelectedFilters(i,r),bricksUtils.fetchFilterResults(i))}))}}}}});function bricksRadioFilter(){bricksRadioFilterFn.run()}var bricksRangeFilterFn=new BricksFunction({parentNode:document,selector:'.brxe-filter-range[data-brx-filter] input[type="number"]',frontEndOnly:!0,eachElement:function(e){var t=e.closest("[data-brx-filter]")||!1;if(t){var r=Object.values(window.bricksData.filterInstances).find((function(e){return e.filterElement===t}))||!1;if(r){null==r||r.filterId;var i=(null==r?void 0:r.targetQueryId)||!1,n=(null==r?void 0:r.filterMethod)||"ajax",a=(null==r?void 0:r.filterApplyOn)||"change";i&&"ajax"===n&&e.addEventListener("change",(function(n){var l=e.classList.contains("min")?"min":"max",c="min"===l?e.value:t.querySelector('input.min[type="number"]').value||0,s="max"===l?e.value:t.querySelector('input.max[type="number"]').value||0;if(c=parseFloat(c),s=parseFloat(s),!isNaN(c)&&!isNaN(s)){c>s&&("min"===l?(c=s,e.value=c):(s=c,e.value=s)),c<r.min?(c=r.min,e.value=c):c>r.max&&(c=r.max,e.value=c);var o=[c,s];if(o!==r.currentValue)if(r.currentValue=[].concat(o),"change"===a)(window.bricksData.queryLoopInstances[i]||!1)&&(bricksUtils.updateSelectedFilters(i,r),bricksUtils.fetchFilterResults(i))}}))}}}});function bricksRangeFilter(){bricksRangeFilterFn.run()}function bricksRangeValueUpdater(){document.addEventListener("bricks/ajax/query_result/displayed",(function(e){var t=e.detail.queryId||!1;if(t){var r=bricksUtils.getFiltersForQuery(t).filter((function(e){return"range"===e.filterType}));r.length>0&&r.forEach((function(e){var t=e.filterElement,r=t.querySelector('input.min[type="number"]'),i=t.querySelector('input.max[type="number"]');if(r&&i){var n=parseFloat(r.value)||0,a=parseFloat(i.value)||0;e.currentValue=[n,a]}}))}}))}var bricksRangeSliderUIFn=new BricksFunction({parentNode:document,selector:'.brxe-filter-range[data-brx-filter] input[type="range"]',frontEndOnly:!0,eachElement:function(e){var t=e.closest("[data-brx-filter]")||!1;if(t){var r=Object.values(window.bricksData.filterInstances).find((function(e){return e.filterElement===t}))||!1;if(r){var i="rtl"===document.dir||"rtl"===document.documentElement.dir,n=t.querySelector('input.max[type="range"]'),a=t.querySelector('input.min[type="range"]'),l=function(e,i){var n=t.querySelector(".value-wrap .".concat(e," .value"));n&&(i=parseFloat(i)||0,null!=r&&r.decimalPlaces&&(i=i.toLocaleString("en-US",{minimumFractionDigits:r.decimalPlaces,maximumFractionDigits:r.decimalPlaces})),null!=r&&r.thousands&&null!=r&&r.separator?i=i.toLocaleString("en-US").replaceAll(",",null==r?void 0:r.separator):null!=r&&r.thousands&&(i=i.toLocaleString("en-US")),n.innerText=i)};e.addEventListener("input",(function(c){var s=parseFloat(c.target.value)||0,o=e.classList.contains("min")?"lower":"upper";l(o,s),function(e,l){var c=t.querySelector(".slider-track");if(c){if(!Array.isArray(r.currentValue)||r.currentValue.length<2)return;var s="lower"===e?l:r.currentValue[0],o="lower"===e?r.currentValue[1]:l;s>=o&&(s=o),o<=s&&(o=s);var u=parseFloat(a.getAttribute("min")||0),d=parseFloat(n.getAttribute("max")||0);u===d&&(d=u+1),s<u&&(s=u),o>d&&(o=d);var f=(s-u)/(d-u)*100,b=(o-u)/(d-u)*100;if(!isNaN(f)&&!isNaN(b)){var v=b-f;c.style.visibility=v<=2?"hidden":"visible",i?c.style.right="".concat(f,"%"):c.style.left="".concat(f,"%"),c.style.width="".concat(v,"%")}}}(o,s)})),e.addEventListener("change",(function(i){var n=e.classList.contains("min")?"lower":"upper",a="lower"===n?e.value:t.querySelector('input.min[type="range"]').value||0,c="upper"===n?e.value:t.querySelector('input.max[type="range"]').value||0;(a=parseFloat(a))>(c=parseFloat(c))&&("lower"===n?(a=c,e.value=a):(c=a,e.value=c)),(a<r.min||a>r.max)&&(e.value=a),l(n,e.value);var s=t.querySelector('input.min[type="number"]');s&&(s.value=a);var o=t.querySelector('input.max[type="number"]');o&&(o.value=c),"lower"===n?s.dispatchEvent(new Event("change")):o.dispatchEvent(new Event("change"))}))}}}});function bricksRangeSliderUI(){bricksRangeSliderUIFn.run()}var bricksCheckboxFilterFn=new BricksFunction({parentNode:document,selector:".brxe-filter-checkbox[data-brx-filter] input",frontEndOnly:!0,eachElement:function(e){var t=e.closest("[data-brx-filter]")||!1;if(t){var r=Object.values(window.bricksData.filterInstances).find((function(e){return e.filterElement===t}))||!1;if(r){null==r||r.filterId;var i=(null==r?void 0:r.targetQueryId)||!1,n=(null==r?void 0:r.filterMethod)||"ajax",a=(null==r?void 0:r.filterApplyOn)||"change",l=(null==r?void 0:r.autoCheck)||!1,c=(null==r?void 0:r.hierarchy)||!1;i&&"ajax"===n&&e.addEventListener("change",(function(t){var n=t.target.value,s=_toConsumableArray(r.currentValue)||[],o=s.indexOf(n),u=[],d=function(e){var t=e.closest("li")||!1;t&&(e.checked&&t.classList.add("brx-option-active"),e.checked||t.classList.remove("brx-option-active"));var r=e.closest("label")||!1;r&&(e.checked&&r.classList.add("brx-option-active"),e.checked||r.classList.remove("brx-option-active"));var i=e.nextElementSibling||!1;i&&(e.checked&&i.classList.add("brx-option-active"),e.checked||i.classList.remove("brx-option-active"))};if(l&&c){var f=t.target.closest("li[data-depth]")||!1;if(f)for(var b=parseInt(f.dataset.depth)||0,v=f.nextElementSibling||!1;v;){if((parseInt(v.dataset.depth)||0)<=b)break;var k=v.querySelector('input[type="checkbox"]');k&&u.push(k),v=v.nextElementSibling||!1}}(!t.target.checked&&o>-1&&o>-1&&(s.splice(o,1),l&&c&&u.length&&u.forEach((function(e){e.checked=!1,d(e);var t=e.value,r=s.indexOf(t);r>-1&&s.splice(r,1)}))),t.target.checked&&-1===o&&(s.push(n),l&&c&&u.length&&u.forEach((function(e){e.checked=!0,d(e);var t=e.value;-1===s.indexOf(t)&&s.push(t)}))),r.currentValue=_toConsumableArray(s),r.filterElement.name=e.name,d(e),"change"===a)&&((window.bricksData.queryLoopInstances[i]||!1)&&(bricksUtils.updateSelectedFilters(i,r),bricksUtils.fetchFilterResults(i)))}))}}}});function bricksCheckboxFilter(){bricksCheckboxFilterFn.run()}var bricksDatePickerFilterFn=new BricksFunction({parentNode:document,selector:".brxe-filter-datepicker[data-brx-filter]",frontEndOnly:!0,eachElement:function(e){var t=Object.values(window.bricksData.filterInstances).find((function(t){return t.filterElement===e}))||!1;if(t){null==t||t.filterId;var r=(null==t?void 0:t.targetQueryId)||!1,i=(null==t?void 0:t.filterMethod)||"ajax",n=(null==t||t.filterSource,(null==t?void 0:t.filterApplyOn)||"change");if(r&&"ajax"===i){var a,l=(null===(a=e.dataset)||void 0===a?void 0:a.bricksDatepickerOptions)||!1;l&&(t.datepicker&&t.datepicker.destroy(),(l=JSON.parse(l)).disableMobile=!0,l.onReady=function(t,r,i){var n=e.getAttribute("aria-label")||"Date";i.altInput.setAttribute("aria-label",n),e.id&&(i.altInput.setAttribute("id",e.id),e.removeAttribute("id"))},l.onChange=function(e,i,a){var l,c=a.config.mode;a.config.enableTime;if("single"===c){if(!Array.isArray(e)||1!==e.length)return}else if("range"===c&&(!Array.isArray(e)||2!==e.length))return;var s=i.split((null===(l=t.datepicker)||void 0===l||null===(l=l.l10n)||void 0===l?void 0:l.rangeSeparator)||" - "),o=[];s.forEach((function(e,r){var i=t.datepicker.parseDate(e,t.datepicker.config.altFormat),n=i.getMonth()+1,a=i.getDate(),l=i.getFullYear();if(n<10&&(n="0"+n),a<10&&(a="0"+a),o[r]="".concat(l,"-").concat(n,"-").concat(a),t.datepicker.config.enableTime){var c=i.getHours(),s=i.getMinutes();c<10&&(c="0"+c),s<10&&(s="0"+s),o[r]+=" ".concat(c,":").concat(s)}}));var u=o.join(",");u!==t.currentValue&&(t.currentValue=u,"change"===n&&(window.bricksData.queryLoopInstances[r]||!1)&&(bricksUtils.updateSelectedFilters(r,t),bricksUtils.fetchFilterResults(r)))},t.datepicker=flatpickr(e,l))}}}});function bricksDatePickerFilter(){bricksDatePickerFilterFn.run()}var bricksActiveFilterFn=new BricksFunction({parentNode:document,selector:".brxe-filter-active-filters[data-brx-filter] [data-filter-id]",frontEndOnly:!0,eachElement:function(e){var t=e.closest("[data-brx-filter]")||!1;if(t){var r=Object.values(window.bricksData.filterInstances).find((function(e){return e.filterElement===t}))||!1;if(r){null==r||r.filterId;var i=(null==r?void 0:r.targetQueryId)||!1,n=(null==r?void 0:r.filterMethod)||"ajax";null==r||r.filterSource,null==r||r.filterApplyOn;if(i){var a=e.dataset.filterId||!1,l=e.dataset.filterValue||!1,c=e.dataset.filterUrlParam||"";a&&"ajax"===n&&e.addEventListener("click",(function(e){var t=Object.values(window.bricksData.filterInstances).find((function(e){return e.filterId===a||""!==c&&c===e.filterNiceName&&l==e.currentValue&&i===e.targetQueryId}))||!1;t&&(bricksUtils.resetFilterValue(t,l),bricksUtils.updateSelectedFilters(i,t),bricksUtils.fetchFilterResults(i))}))}}}}});function bricksActiveFilter(){bricksActiveFilterFn.run()}var bricksResetFilterFn=new BricksFunction({parentNode:document,selector:".brxe-filter-submit[type='reset'][data-brx-filter]",frontEndOnly:!0,eachElement:function(e){var t=Object.values(window.bricksData.filterInstances).find((function(t){return t.filterElement===e}))||!1;if(t){null==t||t.filterId;var r=(null==t?void 0:t.targetQueryId)||!1,i=(null==t?void 0:t.filterMethod)||"ajax";r&&"ajax"===i&&e.addEventListener("click",(function(e){var i=Object.values(window.bricksData.filterInstances).filter((function(e){return e.targetQueryId===r})),n=window.bricksData.queryLoopInstances[r]||!1;i.length&&(i.forEach((function(e){bricksUtils.resetFilterValue(e)})),null!=n&&n.isLiveSearch?bricksUtils.hideLiveSearchWrapper(r):(bricksUtils.updateSelectedFilters(r,t),bricksUtils.fetchFilterResults(r)))}))}}});function bricksResetFilter(){bricksResetFilterFn.run()}var bricksApplyFilterFn=new BricksFunction({parentNode:document,selector:".brxe-filter-submit[type='submit'][data-brx-filter]",frontEndOnly:!0,eachElement:function(e){var t=Object.values(window.bricksData.filterInstances).find((function(t){return t.filterElement===e}))||!1;if(t){null==t||t.filterId;var r=(null==t?void 0:t.targetQueryId)||!1,i=(null==t?void 0:t.filterMethod)||"ajax",n=(null==t?void 0:t.redirectTo)||!1,a=(null==t?void 0:t.newTab)||!1;r&&"ajax"===i&&e.addEventListener("click",(function(e){if(window.bricksData.queryLoopInstances[r]||!1)if(bricksUtils.updateSelectedFilters(r,t),n){var i=bricksUtils.buildFilterUrlParams(r),l=i?"".concat(n,"?").concat(i):n;a?window.open("".concat(l),"_blank"):window.location.href=l}else bricksUtils.fetchFilterResults(r)}))}}});function bricksApplyFilter(){bricksApplyFilterFn.run()}var bricksPaginationFilterFn=new BricksFunction({parentNode:document,selector:".brxe-pagination[data-brx-filter] a",frontEndOnly:!0,eachElement:function(e){var t=e.closest("[data-brx-filter]")||!1;if(t){var r=Object.values(window.bricksData.filterInstances).find((function(e){return e.filterElement===t}))||!1;if(r){null==r||r.filterId;var i=(null==r?void 0:r.targetQueryId)||!1,n=(null==r?void 0:r.filterMethod)||"ajax",a=bricksUtils.getFiltersForQuery(r.targetQueryId);if((a=a.filter((function(e){return"pagination"!==e.filterType}))).length){"ajax"===n&&e.addEventListener("click",(function(e){e.preventDefault();var t=e.currentTarget;if(window.bricksData.queryLoopInstances[i]||!1){var n=t.href||!1;if(n){var a=bricksUtils.getPageNumberFromUrl(n);if(!(parseInt(a)<1)){!function(e,t){var r=Object.values(window.bricksData.filterInstances).filter((function(t){return t.targetQueryId===e&&"pagination"===t.filterType}));r.length&&r.forEach((function(e){e.currentValue=t}))}(i,a);var l=new URL(t.href);l.search="",bricksUtils.updateSelectedFilters(i,r,l),bricksUtils.fetchFilterResults(i)}}}}))}else t.removeAttribute("data-brx-filter")}}}});function bricksPaginationFilter(){bricksPaginationFilterFn.run()}var bricksFiltersA11yHandlerFn=new BricksFunction({parentNode:document,selector:"span.brx-option-text[tabindex]",frontEndOnly:!0,eachElement:function(e){var t=e.previousElementSibling||!1;t&&"INPUT"===t.tagName&&e.addEventListener("keydown",(function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.click())}))}});function bricksFiltersA11yHandler(){bricksFiltersA11yHandlerFn.run()}var bricksActiveFiltersCountDDFn=new BricksFunction({parentNode:document,selector:"span[data-brx-af-count][data-brx-af-dd]",frontEndOnly:!0,eachElement:function(e){var t=e.dataset.brxAfDd||!1,r=e.dataset.brxAfCount||!1;r&&t&&(window.bricksData.activeFiltersCountInstances||(window.bricksData.activeFiltersCountInstances=[]),window.bricksData.activeFiltersCountInstances.find((function(t){return t.element===e}))?e.removeAttribute("data-brx-af-dd"):(window.bricksData.activeFiltersCountInstances.push({element:e,targetQueryId:r,dynamicTag:t}),e.dataset.brxAfDd=!0))}});function bricksActiveFiltersCountDD(){bricksActiveFiltersCountDDFn.run()}function bricksLiveSearchWrappersInit(){document.addEventListener("bricks/ajax/start",(function(e){var t,r=e.detail.queryId||!1,i=(null===(t=e.detail)||void 0===t?void 0:t.isPopState)||!1;if(r&&!i){var n=window.bricksData.queryLoopInstances[r]||!1;null!=n&&n.isLiveSearch&&bricksUtils.showLiveSearchWrapper(r)}})),document.addEventListener("click",(function(e){var t=e.target;bricksUtils.currentPageTargetQueryIds().forEach((function(e){var r;if(!Object.values(window.bricksData.filterInstances).filter((function(r){return r.targetQueryId===e&&r.filterElement===t})).length){var i=t.closest("[data-brx-ls-wrapper]");(null==i||null===(r=i.dataset)||void 0===r?void 0:r.brxLsWrapper)!==e&&(t.classList.contains("icon")||bricksUtils.hideLiveSearchWrapper(e))}}))}))}function bricksDisableFiltersOnLoad(){document.addEventListener("bricks/ajax/start",(function(e){var t=e.detail.queryId||!1;if(t&&(window.bricksData.queryLoopInstances[t]||!1)){var r=Object.values(window.bricksData.filterInstances).filter((function(e){return e.targetQueryId===t}));r.length&&r.forEach((function(e){var t;if("search"!==e.filterType){var r=null!==(t=e.filterElement)&&void 0!==t&&t;r&&(r.disabled=!0,r.classList.add("brx-filter-disabled"),r.querySelectorAll("input").forEach((function(e){e.disabled=!0})))}}))}})),document.addEventListener("bricks/ajax/end",(function(e){var t=e.detail.queryId||!1;if(t&&(window.bricksData.queryLoopInstances[t]||!1)){var r=Object.values(window.bricksData.filterInstances).filter((function(e){return e.targetQueryId===t}));r.length&&r.forEach((function(e){var t,r=null!==(t=e.filterElement)&&void 0!==t&&t;r&&(r.disabled=!1,r.classList.remove("brx-filter-disabled"),r.querySelectorAll("input").forEach((function(e){e.disabled=!1})))}))}}))}function bricksInitBrowserState(){if(bricksIsFrontend){var e={};bricksUtils.currentPageTargetQueryIds().forEach((function(t){e[t]={},bricksUtils.getFiltersForQuery(t).forEach((function(r){e[t][r.filterId]=r.currentValue}))}));var t=window.bricksData.selectedFilters;window.history.replaceState({isBricksFilter:!0,targetQueryId:"",selectedFilters:t,instancesValue:e},"",window.location.href)}}function bricksBrowserHistorySupport(){bricksIsFrontend&&("scrollRestoration"in history&&(history.scrollRestoration="manual"),window.addEventListener("popstate",(function(e){if(e.state&&e.state.isBricksFilter){var t=e.state.targetQueryId||!1,r=e.state.selectedFilters||[],i=e.state.instancesValue||[];if(window.bricksData.selectedFilters=r,Object.keys(i).length&&Object.keys(i).forEach((function(e){Object.keys(i[e]).forEach((function(t){window.bricksData.filterInstances[t]&&(window.bricksData.filterInstances[t].currentValue=i[e][t])}))})),t)bricksUtils.fetchFilterResults(t,!0);else bricksUtils.currentPageTargetQueryIds().forEach((function(e){bricksUtils.fetchFilterResults(e,!0)}))}})))}function bricksSearchValueUpdater(){document.addEventListener("bricks/ajax/query_result/displayed",(function(e){var t=e.detail.queryId||!1;if(t){var r=bricksUtils.getFiltersForQuery(t).filter((function(e){return"search"===e.filterType}));r.length>0&&r.forEach((function(e){var r=e.filterElement,i=e.currentValue;r.value!==i&&(r.value=i,bricksUtils.updateLiveSearchTerm(t,i))}))}}))}function bricksRestoreFocusOnFilter(){var e={elementId:!1,input:!1};document.addEventListener("focusin",(function(t){var r=t.target,i=r.closest("[data-brx-filter]");if(i){var n,a=Object.values(window.bricksData.filterInstances).find((function(e){return e.filterElement===i}));if(a)if(e.elementId=a.filterId,"range"===a.filterType)e.input=r;else e.input=(null===(n=r.parentElement)||void 0===n?void 0:n.querySelector("input"))||!1}})),document.addEventListener("bricks/ajax/query_result/displayed",(function(t){if(e.elementId&&e.input){var r=Object.values(window.bricksData.filterInstances).find((function(t){return t.filterId===e.elementId}));if(r&&r.filterElement){var i=r.filterElement,n=i.querySelectorAll("input"),a=Array.from(n).find((function(t){return t.name===e.input.name&&t.value===e.input.value}));if(a){var l=a.parentElement.querySelector("[tabindex]")||!1;if(l?l.focus():a.focus(),"range"===r.filterType&&"INPUT"===a.tagName&&"range"===a.type){if(!Array.isArray(r.currentValue)||r.currentValue.length<2)return;if(r.currentValue[0]!==r.currentValue[1])return;a.style.zIndex=3;var c=a.classList.contains("min")?"max":"min",s=i.querySelector("input.".concat(c,"[type='range']"));s&&(s.style.zIndex=2)}}}}}))}function bricksFilterOptionsInteractions(){var e=function(e){var t=Object.values(window.bricksData.filterInstances).filter((function(t){return!("initial"!==e&&t.targetQueryId!==e||"active-filters"!==t.filterType&&"checkbox"!==t.filterType&&"datepicker"!==t.filterType&&"search"!==t.filterType&&"select"!==t.filterType&&"radio"!==t.filterType&&"range"!==t.filterType)}));if(t.length){var r={"bricks/filter/option/notempty":[],"bricks/filter/option/empty":[]};t.forEach((function(e){var t,i;if(e.filterElement&&e.filterId&&e.filterType){var n;switch(e.filterType){case"active-filters":n=e.filterElement.innerHTML;break;case"datepicker":n=e.currentValue;break;case"range":e.min==e.currentValue[0]&&e.max==e.currentValue[1]||(n=1);break;case"search":n=e.filterElement.value;break;case"select":n=null===(t=e.filterElement.querySelectorAll(":scope > option:not(.placeholder)"))||void 0===t?void 0:t.length;break;default:n=null===(i=e.filterElement.querySelectorAll(":scope > li:not(.brx-option-all)"))||void 0===i?void 0:i.length}n?r["bricks/filter/option/notempty"].push(e.filterId):r["bricks/filter/option/empty"].push(e.filterId)}})),Object.keys(r).forEach((function(e){var t=new CustomEvent(e,{detail:{filterElementIds:r[e]}});document.dispatchEvent(t)}))}};document.addEventListener("bricks/ajax/query_result/displayed",(function(t){var r=t.detail.queryId||!1;r&&e(r)})),e("initial")}document.addEventListener("DOMContentLoaded",(function(e){bricksFilters(),bricksLiveSearchWrappersInit(),bricksSearchFilter(),bricksSearchValueUpdater(),bricksSelectFilter(),bricksResetFilter(),bricksApplyFilter(),bricksPaginationFilter(),bricksRadioFilter(),bricksRangeFilter(),bricksRangeValueUpdater(),bricksRangeSliderUI(),bricksCheckboxFilter(),bricksDatePickerFilter(),bricksActiveFilter(),bricksActiveFiltersCountDD(),bricksDisableFiltersOnLoad(),bricksInitBrowserState(),bricksBrowserHistorySupport(),bricksFiltersA11yHandler(),bricksRestoreFocusOnFilter(),bricksFilterOptionsInteractions()}));